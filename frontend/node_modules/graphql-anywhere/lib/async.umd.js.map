{"version":3,"file":"async.umd.js","sources":["async.esm.js"],"sourcesContent":["import { __awaiter, __generator } from 'tslib';\nimport { getMainDefinition, getFragmentDefinitions, createFragmentMap, shouldInclude, isField, argumentsObjectFromField, resultKeyNameFromField, getDirectiveInfoFromField, isInlineFragment } from 'apollo-utilities';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nfunction merge(dest, src) {\n    if (src !== null && typeof src === 'object') {\n        Object.keys(src).forEach(function (key) {\n            var srcVal = src[key];\n            if (!hasOwn.call(dest, key)) {\n                dest[key] = srcVal;\n            }\n            else {\n                merge(dest[key], srcVal);\n            }\n        });\n    }\n}\n\nfunction graphql$1(resolver, document, rootValue, contextValue, variableValues, execOptions) {\n    if (execOptions === void 0) { execOptions = {}; }\n    var mainDefinition = getMainDefinition(document);\n    var fragments = getFragmentDefinitions(document);\n    var fragmentMap = createFragmentMap(fragments);\n    var resultMapper = execOptions.resultMapper;\n    var fragmentMatcher = execOptions.fragmentMatcher || (function () { return true; });\n    var execContext = {\n        fragmentMap: fragmentMap,\n        contextValue: contextValue,\n        variableValues: variableValues,\n        resultMapper: resultMapper,\n        resolver: resolver,\n        fragmentMatcher: fragmentMatcher,\n    };\n    return executeSelectionSet$1(mainDefinition.selectionSet, rootValue, execContext);\n}\nfunction executeSelectionSet$1(selectionSet, rootValue, execContext) {\n    return __awaiter(this, void 0, void 0, function () {\n        var fragmentMap, contextValue, variables, result, execute;\n        var _this = this;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    fragmentMap = execContext.fragmentMap, contextValue = execContext.contextValue, variables = execContext.variableValues;\n                    result = {};\n                    execute = function (selection) { return __awaiter(_this, void 0, void 0, function () {\n                        var fieldResult, resultFieldKey, fragment, typeCondition, fragmentResult;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0:\n                                    if (!shouldInclude(selection, variables)) {\n                                        return [2];\n                                    }\n                                    if (!isField(selection)) return [3, 2];\n                                    return [4, executeField$1(selection, rootValue, execContext)];\n                                case 1:\n                                    fieldResult = _a.sent();\n                                    resultFieldKey = resultKeyNameFromField(selection);\n                                    if (fieldResult !== undefined) {\n                                        if (result[resultFieldKey] === undefined) {\n                                            result[resultFieldKey] = fieldResult;\n                                        }\n                                        else {\n                                            merge(result[resultFieldKey], fieldResult);\n                                        }\n                                    }\n                                    return [2];\n                                case 2:\n                                    if (isInlineFragment(selection)) {\n                                        fragment = selection;\n                                    }\n                                    else {\n                                        fragment = fragmentMap[selection.name.value];\n                                        if (!fragment) {\n                                            throw new Error(\"No fragment named \" + selection.name.value);\n                                        }\n                                    }\n                                    typeCondition = fragment.typeCondition.name.value;\n                                    if (!execContext.fragmentMatcher(rootValue, typeCondition, contextValue)) return [3, 4];\n                                    return [4, executeSelectionSet$1(fragment.selectionSet, rootValue, execContext)];\n                                case 3:\n                                    fragmentResult = _a.sent();\n                                    merge(result, fragmentResult);\n                                    _a.label = 4;\n                                case 4: return [2];\n                            }\n                        });\n                    }); };\n                    return [4, Promise.all(selectionSet.selections.map(execute))];\n                case 1:\n                    _a.sent();\n                    if (execContext.resultMapper) {\n                        return [2, execContext.resultMapper(result, rootValue)];\n                    }\n                    return [2, result];\n            }\n        });\n    });\n}\nfunction executeField$1(field, rootValue, execContext) {\n    return __awaiter(this, void 0, void 0, function () {\n        var variables, contextValue, resolver, fieldName, args, info, result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    variables = execContext.variableValues, contextValue = execContext.contextValue, resolver = execContext.resolver;\n                    fieldName = field.name.value;\n                    args = argumentsObjectFromField(field, variables);\n                    info = {\n                        isLeaf: !field.selectionSet,\n                        resultKey: resultKeyNameFromField(field),\n                        directives: getDirectiveInfoFromField(field, variables),\n                    };\n                    return [4, resolver(fieldName, rootValue, args, contextValue, info)];\n                case 1:\n                    result = _a.sent();\n                    if (!field.selectionSet) {\n                        return [2, result];\n                    }\n                    if (result == null) {\n                        return [2, result];\n                    }\n                    if (Array.isArray(result)) {\n                        return [2, executeSubSelectedArray$1(field, result, execContext)];\n                    }\n                    return [2, executeSelectionSet$1(field.selectionSet, result, execContext)];\n            }\n        });\n    });\n}\nfunction executeSubSelectedArray$1(field, result, execContext) {\n    return Promise.all(result.map(function (item) {\n        if (item === null) {\n            return null;\n        }\n        if (Array.isArray(item)) {\n            return executeSubSelectedArray$1(field, item, execContext);\n        }\n        return executeSelectionSet$1(field.selectionSet, item, execContext);\n    }));\n}\n\nexport { graphql$1 as graphql };\n//# sourceMappingURL=async.esm.js.map\n"],"names":["getMainDefinition","getFragmentDefinitions","createFragmentMap","__awaiter","__generator","shouldInclude","isField","resultKeyNameFromField","isInlineFragment","argumentsObjectFromField","getDirectiveInfoFromField"],"mappings":"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"}