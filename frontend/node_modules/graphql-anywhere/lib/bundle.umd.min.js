!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("apollo-utilities")):"function"==typeof define&&define.amd?define(["exports","apollo-utilities"],r):r((e=e||self).graphqlAnywhere={},e.apollo.utilities)}(this,function(e,p){"use strict";function n(e,r,t,n,i,u){void 0===u&&(u={});var a=p.getMainDefinition(r),o=p.getFragmentDefinitions(r),l={fragmentMap:p.createFragmentMap(o),contextValue:n,variableValues:i,resultMapper:u.resultMapper,resolver:e,fragmentMatcher:u.fragmentMatcher||function(){return!0}};return d(a.selectionSet,t,l)}function d(e,a,o){var l=o.fragmentMap,s=o.contextValue,c=o.variableValues,f={};return e.selections.forEach(function(e){if(p.shouldInclude(e,c))if(p.isField(e)){var r=function(e,r,t){var n=t.variableValues,i=t.contextValue,u=t.resolver,a=e.name.value,o=p.argumentsObjectFromField(e,n),l={isLeaf:!e.selectionSet,resultKey:p.resultKeyNameFromField(e),directives:p.getDirectiveInfoFromField(e,n)},s=u(a,r,o,i,l);if(!e.selectionSet)return s;if(null==s)return s;if(Array.isArray(s))return function r(t,e,n){return e.map(function(e){return null===e?null:Array.isArray(e)?r(t,e,n):d(t.selectionSet,e,n)})}(e,s,t);return d(e.selectionSet,s,t)}(e,a,o),t=p.resultKeyNameFromField(e);void 0!==r&&(void 0===f[t]?f[t]=r:v(f[t],r))}else{var n=void 0;if(p.isInlineFragment(e))n=e;else if(!(n=l[e.name.value]))throw new Error("No fragment named "+e.name.value);var i=n.typeCondition.name.value;if(o.fragmentMatcher(a,i,s)){var u=d(n.selectionSet,a,o);v(f,u)}}}),o.resultMapper?o.resultMapper(f,a):f}var i=Object.prototype.hasOwnProperty;function v(t,n){null!==n&&"object"==typeof n&&Object.keys(n).forEach(function(e){var r=n[e];i.call(t,e)?v(t[e],r):t[e]=r})}function u(e,r){n(function(e,r,t,n,i){if(!{}.hasOwnProperty.call(r,i.resultKey))throw new Error(i.resultKey+" missing on "+JSON.stringify(r));return r[i.resultKey]},e,r,{},{},{fragmentMatcher:function(){return!1}})}var l="<<anonymous>>";function s(e){this.message=e,this.stack=""}s.prototype=Error.prototype;var c={prop:"prop",context:"context",childContext:"child context"};e.default=n,e.filter=function(r,e){var t=function(e,r,t,n,i){return r[i.resultKey]};return Array.isArray(e)?e.map(function(e){return n(t,r,e)}):n(t,r,e)},e.check=u,e.propType=function(n){return function(o){function e(e,r,t,n,i,u){if(n=n||l,u=u||t,null!=r[t])return o(r,t,n,i,u);var a=c[i];return e?null===r[t]?new s("The "+a+" `"+u+"` is marked as required in `"+n+"`, but its value is `null`."):new s("The "+a+" `"+u+"` is marked as required in `"+n+"`, but its value is `undefined`."):null}var r=e.bind(null,!1);return r.isRequired=e.bind(null,!0),r}(function(e,r){var t=e[r];try{return t.loading||u(n,t),null}catch(e){return e}})},Object.defineProperty(e,"__esModule",{value:!0})});