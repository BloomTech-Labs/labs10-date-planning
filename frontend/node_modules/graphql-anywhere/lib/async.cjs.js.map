{"version":3,"file":"async.cjs.js","sources":["async.esm.js"],"sourcesContent":["import { __awaiter, __generator } from 'tslib';\nimport { getMainDefinition, getFragmentDefinitions, createFragmentMap, shouldInclude, isField, argumentsObjectFromField, resultKeyNameFromField, getDirectiveInfoFromField, isInlineFragment } from 'apollo-utilities';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nfunction merge(dest, src) {\n    if (src !== null && typeof src === 'object') {\n        Object.keys(src).forEach(function (key) {\n            var srcVal = src[key];\n            if (!hasOwn.call(dest, key)) {\n                dest[key] = srcVal;\n            }\n            else {\n                merge(dest[key], srcVal);\n            }\n        });\n    }\n}\n\nfunction graphql$1(resolver, document, rootValue, contextValue, variableValues, execOptions) {\n    if (execOptions === void 0) { execOptions = {}; }\n    var mainDefinition = getMainDefinition(document);\n    var fragments = getFragmentDefinitions(document);\n    var fragmentMap = createFragmentMap(fragments);\n    var resultMapper = execOptions.resultMapper;\n    var fragmentMatcher = execOptions.fragmentMatcher || (function () { return true; });\n    var execContext = {\n        fragmentMap: fragmentMap,\n        contextValue: contextValue,\n        variableValues: variableValues,\n        resultMapper: resultMapper,\n        resolver: resolver,\n        fragmentMatcher: fragmentMatcher,\n    };\n    return executeSelectionSet$1(mainDefinition.selectionSet, rootValue, execContext);\n}\nfunction executeSelectionSet$1(selectionSet, rootValue, execContext) {\n    return __awaiter(this, void 0, void 0, function () {\n        var fragmentMap, contextValue, variables, result, execute;\n        var _this = this;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    fragmentMap = execContext.fragmentMap, contextValue = execContext.contextValue, variables = execContext.variableValues;\n                    result = {};\n                    execute = function (selection) { return __awaiter(_this, void 0, void 0, function () {\n                        var fieldResult, resultFieldKey, fragment, typeCondition, fragmentResult;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0:\n                                    if (!shouldInclude(selection, variables)) {\n                                        return [2];\n                                    }\n                                    if (!isField(selection)) return [3, 2];\n                                    return [4, executeField$1(selection, rootValue, execContext)];\n                                case 1:\n                                    fieldResult = _a.sent();\n                                    resultFieldKey = resultKeyNameFromField(selection);\n                                    if (fieldResult !== undefined) {\n                                        if (result[resultFieldKey] === undefined) {\n                                            result[resultFieldKey] = fieldResult;\n                                        }\n                                        else {\n                                            merge(result[resultFieldKey], fieldResult);\n                                        }\n                                    }\n                                    return [2];\n                                case 2:\n                                    if (isInlineFragment(selection)) {\n                                        fragment = selection;\n                                    }\n                                    else {\n                                        fragment = fragmentMap[selection.name.value];\n                                        if (!fragment) {\n                                            throw new Error(\"No fragment named \" + selection.name.value);\n                                        }\n                                    }\n                                    typeCondition = fragment.typeCondition.name.value;\n                                    if (!execContext.fragmentMatcher(rootValue, typeCondition, contextValue)) return [3, 4];\n                                    return [4, executeSelectionSet$1(fragment.selectionSet, rootValue, execContext)];\n                                case 3:\n                                    fragmentResult = _a.sent();\n                                    merge(result, fragmentResult);\n                                    _a.label = 4;\n                                case 4: return [2];\n                            }\n                        });\n                    }); };\n                    return [4, Promise.all(selectionSet.selections.map(execute))];\n                case 1:\n                    _a.sent();\n                    if (execContext.resultMapper) {\n                        return [2, execContext.resultMapper(result, rootValue)];\n                    }\n                    return [2, result];\n            }\n        });\n    });\n}\nfunction executeField$1(field, rootValue, execContext) {\n    return __awaiter(this, void 0, void 0, function () {\n        var variables, contextValue, resolver, fieldName, args, info, result;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    variables = execContext.variableValues, contextValue = execContext.contextValue, resolver = execContext.resolver;\n                    fieldName = field.name.value;\n                    args = argumentsObjectFromField(field, variables);\n                    info = {\n                        isLeaf: !field.selectionSet,\n                        resultKey: resultKeyNameFromField(field),\n                        directives: getDirectiveInfoFromField(field, variables),\n                    };\n                    return [4, resolver(fieldName, rootValue, args, contextValue, info)];\n                case 1:\n                    result = _a.sent();\n                    if (!field.selectionSet) {\n                        return [2, result];\n                    }\n                    if (result == null) {\n                        return [2, result];\n                    }\n                    if (Array.isArray(result)) {\n                        return [2, executeSubSelectedArray$1(field, result, execContext)];\n                    }\n                    return [2, executeSelectionSet$1(field.selectionSet, result, execContext)];\n            }\n        });\n    });\n}\nfunction executeSubSelectedArray$1(field, result, execContext) {\n    return Promise.all(result.map(function (item) {\n        if (item === null) {\n            return null;\n        }\n        if (Array.isArray(item)) {\n            return executeSubSelectedArray$1(field, item, execContext);\n        }\n        return executeSelectionSet$1(field.selectionSet, item, execContext);\n    }));\n}\n\nexport { graphql$1 as graphql };\n//# sourceMappingURL=async.esm.js.map\n"],"names":["getMainDefinition","getFragmentDefinitions","createFragmentMap","__awaiter","__generator","shouldInclude","isField","resultKeyNameFromField","isInlineFragment","argumentsObjectFromField","getDirectiveInfoFromField"],"mappings":"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"}