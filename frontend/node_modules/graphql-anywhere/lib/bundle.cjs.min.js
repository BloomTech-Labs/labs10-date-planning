"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("apollo-utilities");function r(r,n,i,a,u,o){void 0===o&&(o={});var l=e.getMainDefinition(n),s=e.getFragmentDefinitions(n),c={fragmentMap:e.createFragmentMap(s),contextValue:a,variableValues:u,resultMapper:o.resultMapper,resolver:r,fragmentMatcher:o.fragmentMatcher||function(){return!0}};return t(l.selectionSet,i,c)}function t(r,i,a){var o=a.fragmentMap,l=a.contextValue,s=a.variableValues,c={};return r.selections.forEach(function(r){if(e.shouldInclude(r,s))if(e.isField(r)){var f=n(r,i,a),p=e.resultKeyNameFromField(r);void 0!==f&&(void 0===c[p]?c[p]=f:u(c[p],f))}else{var v=void 0;if(e.isInlineFragment(r))v=r;else if(!(v=o[r.name.value]))throw new Error("No fragment named "+r.name.value);var d=v.typeCondition.name.value;if(a.fragmentMatcher(i,d,l)){var m=t(v.selectionSet,i,a);u(c,m)}}}),a.resultMapper?a.resultMapper(c,i):c}function n(r,n,a){var u=a.variableValues,o=a.contextValue,l=(0,a.resolver)(r.name.value,n,e.argumentsObjectFromField(r,u),o,{isLeaf:!r.selectionSet,resultKey:e.resultKeyNameFromField(r),directives:e.getDirectiveInfoFromField(r,u)});return r.selectionSet?null==l?l:Array.isArray(l)?i(r,l,a):t(r.selectionSet,l,a):l}function i(e,r,n){return r.map(function(r){return null===r?null:Array.isArray(r)?i(e,r,n):t(e.selectionSet,r,n)})}var a=Object.prototype.hasOwnProperty;function u(e,r){null!==r&&"object"==typeof r&&Object.keys(r).forEach(function(t){var n=r[t];a.call(e,t)?u(e[t],n):e[t]=n})}function o(e,t){var n=function(e,r,t,n,i){return r[i.resultKey]};return Array.isArray(t)?t.map(function(t){return r(n,e,t)}):r(n,e,t)}function l(e,t){r(function(e,r,t,n,i){if(!{}.hasOwnProperty.call(r,i.resultKey))throw new Error(i.resultKey+" missing on "+JSON.stringify(r));return r[i.resultKey]},e,t,{},{},{fragmentMatcher:function(){return!1}})}var s="<<anonymous>>";function c(e){this.message=e,this.stack=""}c.prototype=Error.prototype;var f={prop:"prop",context:"context",childContext:"child context"};function p(e){function r(r,t,n,i,a,u){if(i=i||s,u=u||n,null==t[n]){var o=f[a];return r?null===t[n]?new c("The "+o+" `"+u+"` is marked as required in `"+i+"`, but its value is `null`."):new c("The "+o+" `"+u+"` is marked as required in `"+i+"`, but its value is `undefined`."):null}return e(t,n,i,a,u)}var t=r.bind(null,!1);return t.isRequired=r.bind(null,!0),t}function v(e){return p(function(r,t){var n=r[t];try{return n.loading||l(e,n),null}catch(e){return e}})}exports.default=r,exports.filter=o,exports.check=l,exports.propType=v;
