!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.jssPluginNested={})}(this,function(e){"use strict";function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=/\s*,\s*/g,a=/&/g,g=/\$([\w-]+)/g;e.default=function(){function c(r,o){return function(e,t){var n=r.getRule(t)||o&&o.getRule(t);return n?(n=n).selector:(r.options.meta||r.toString(),t)}}function d(e,t){for(var n=t.split(l),r=e.split(l),o="",i=0;i<n.length;i++)for(var s=n[i],u=0;u<r.length;u++){var f=r[u];o&&(o+=", "),o+=-1!==f.indexOf("&")?f.replace(a,s):s+" "+f}return o}function p(e,t,n){if(n)return v({},n,{index:n.index+1});var r=e.options.nestingLevel;return r=void 0===r?1:r+1,v({},e.options,{nestingLevel:r,index:t.indexOf(e)+1})}return{onProcessStyle:function(e,t,n){if("style"!==t.type)return e;var r,o,i=t,s=i.options.parent;for(var u in e){var f=-1!==u.indexOf("&"),l="@"===u[0];if(f||l){if(r=p(i,s,r),f){var a=d(u,i.selector);o||(o=c(s,n)),a=a.replace(g,o),s.addRule(a,e[u],v({},r,{selector:a}))}else l&&s.addRule(u,{},r).addRule(i.key,e[u],{selector:i.selector});delete e[u]}}return e}}},Object.defineProperty(e,"__esModule",{value:!0})});
